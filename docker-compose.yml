# Use postgres/example user/password credentials
version: "3.1"

services:
  db:
    image: postgres
    environment:
      POSTGRES_PASSWORD: headquarterservice123
      POSTGRES_USER: headquarterservice
      POSTGRES_DB: headquarterservice
    ports:
      - 5432:5432

  support_db:
    image: postgres
    environment:
      POSTGRES_PASSWORD: supportservice123
      POSTGRES_USER: supportservice
      POSTGRES_DB: supportservice
    ports:
      - 5433:5432

  rabbit_mq:
    image: rabbitmq:3-management
    ports:
      - 5672:5672
      - 15672:15672
    volumes:
      - rabbitmq_data:/data

  adminer:
    image: adminer:latest
    environment:
      ADMINER_DEFAULT_SERVER: headquarter_service_db
      ADMINER_DEFAULT_DB_NAME: headquarterservice
    ports:
      - 9000:8080

#  headquarter:
#   image: headquarter_service
#   restart: always
#   build: ./headquarter_service
#   ports:
#     - 8081:8080
#   depends_on: 
#     - rabbit_mq
#     - db
  
#  support:
#    image: support_service
#    restart: always
#    build: ./support_service
#    ports:
#      - 8081:8080
#    depends_on: 
#      - rabbit_mq
#      - support-db

volumes:  
  rabbitmq_data: